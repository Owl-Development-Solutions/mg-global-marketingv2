<table
  mat-table
  #table
  [dataSource]="dataSource()"
  [trackBy]="trackById"
  class="app-table w-full"
>
  <!-- id column -->
  <ng-container matColumnDef="id">
    <th mat-header-cell *matHeaderCellDef class="app-table_header">
      @if (skeleton()) {
        <app-skeleton-text
          [lines]="1"
          [maxLineWidth]="100"
          [minLineWidth]="200"
        ></app-skeleton-text>
      } @else {
        ID
      }
    </th>

    <td mat-cell *matCellDef="let element">
      <h4>{{ element?.id }}</h4>
    </td>
  </ng-container>

  <!-- name column -->
  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef>
      @if (skeleton()) {
        <app-skeleton-text
          [lines]="1"
          [maxLineWidth]="100"
          [minLineWidth]="200"
        ></app-skeleton-text>
      } @else {
        Name
      }
    </th>

    <td mat-cell *matCellDef="let element">
      <h4>{{ element?.firstName }} {{ element?.lastName }}</h4>
    </td>
  </ng-container>

  <!-- left column -->
  <ng-container matColumnDef="left">
    <th mat-header-cell *matHeaderCellDef>
      @if (skeleton()) {
        <app-skeleton-text
          [lines]="1"
          [maxLineWidth]="100"
          [minLineWidth]="200"
        ></app-skeleton-text>
      } @else {
        Left
      }
    </th>

    <td mat-cell *matCellDef="let element">
      {{ element?.leftDownline }}
    </td>
  </ng-container>

  <!-- right column -->
  <ng-container matColumnDef="right">
    <th mat-header-cell *matHeaderCellDef>
      @if (skeleton()) {
        <app-skeleton-text
          [lines]="1"
          [maxLineWidth]="100"
          [minLineWidth]="200"
        ></app-skeleton-text>
      } @else {
        Right
      }
    </th>

    <td mat-cell *matCellDef="let element">
      {{ element?.rightDownline }}
    </td>
  </ng-container>

  <!-- sponsor name -->
  <ng-container matColumnDef="sponsor">
    <th mat-header-cell *matHeaderCellDef>
      @if (skeleton()) {
        <app-skeleton-text
          [lines]="1"
          [maxLineWidth]="100"
          [minLineWidth]="200"
        ></app-skeleton-text>
      } @else {
        Sponsor Name
      }
    </th>

    <td mat-cell *matCellDef="let element">
      {{ element?.sponsorName }}
    </td>
  </ng-container>

  <!-- header and row definitions -->
  <tr
    mat-header-row
    *matHeaderRowDef="displayedColumns; sticky: true"
    class="bg-gray-100"
  ></tr>

  <tr
    mat-row
    *matRowDef="let row; columns: displayedColumns"
    class="hover:bg-gray-50 transition-colors duration-150"
  ></tr>

  <!-- empty state -->
  @if (!skeleton()) {
    <tr class="mat-row" *matNoDataRow>
      <td class="mat-cell text-center py-6" colspan="999">
        <app-empty-history-message
          [message]="'Geonology History is Empty'"
          [icon]="'map'"
        ></app-empty-history-message>
      </td>
    </tr>
  }
</table>
